"use strict";
!(function ($) {
  $.fn.extend({
    countDown: function (options) {
      (options = $.extend({}, {
          timeInSecond: 60,
          displayTpl: "{hour}hr{minute}min{second}sec",
          limit: "hour",
          callback: function () {},
          loop: !1
        },
        options
      )),
      this.each(function () {
        var This = $(this);
        !(function (time, tpl) {
          var timer = setInterval(function () {
            if (time >= 1)
              if (((time -= 1), "day" == options.limit)) {
                var day = Math.floor(time / 3600 / 24),
                  hour = Math.floor((time / 3600) % 24),
                  minute = Math.floor((time / 60) % 60),
                  second = Math.floor(time % 60);
                This.html(
                  tpl
                  .replace("{day}", day)
                  .replace("{hour}", hour)
                  .replace("{minute}", minute)
                  .replace("{second}", second)
                );
              } else
                "hour" == options.limit ?
                ((hour = Math.floor(time / 3600)),
                  (minute = Math.floor((time / 60) % 60)),
                  (second = Math.floor(time % 60)),
                  This.html(
                    tpl
                    .replace("{day}", 0)
                    .replace("{hour}", hour)
                    .replace("{minute}", minute)
                    .replace("{second}", second)
                  )) :
                "minute" == options.limit ?
                ((minute = Math.floor(time / 60)),
                  (second = Math.floor(time % 60)),
                  This.html(
                    tpl
                    .replace("{day}", 0)
                    .replace("{hour}", 0)
                    .replace("{minute}", minute)
                    .replace("{second}", second)
                  )) :
                "second" == options.limit &&
                ((second = Math.floor(time)),
                  This.html(
                    tpl
                    .replace("{day}", 0)
                    .replace("{hour}", 0)
                    .replace("{minute}", 0)
                    .replace("{second}", second)
                  ));
            else {
              if (
                (This.html(
                  tpl
                  .replace("{day}", 0)
                  .replace("{hour}", 0)
                  .replace("{minute}", 0)
                  .replace("{second}", 0)
                ), !options.loop)
              )
                return clearInterval(timer), void options.callback();
              options.callback(), (time = options.timeInSecond + 1);
            }
          }, 1e3);
        })(options.timeInSecond, options.displayTpl);
      });
    }
  });
})(jQuery);